---
- name: Update apt cache and upgrade system
  apt: upgrade=dist update-cache=yes
  sudo: yes
  tags:
    - common
    - update
    - upgrade

- name: Update language
  apt: pkg=language-pack-en
  sudo: yes
  tags:
    - common
    - language

- name: Set locale to {{ locale }}
  command: /usr/sbin/update-locale LANG={{ locale }} LC_ALL={{ locale }}
  sudo: yes
  tags:
    - common
    - language

- name: Set /etc/localtime to {{ timezone }}
  command: /bin/cp /usr/share/zoneinfo/{{ timezone }} /etc/localtime
  sudo: yes
  tags:
    - common
    - localtime

- name: Set /etc/timezone to {{ timezone }}
  template: src=default-timezone.j2 dest=/etc/timezone
  sudo: yes
  tags:
    - common
    - timezone

- name: Update tzdata
  command: /usr/sbin/dpkg-reconfigure --frontend noninteractive tzdata
  sudo: yes
  tags:
    - common
    - tzdata

- name: Stopping and disabling puppet agent
  service: name=puppet state=stopped enabled=no
  sudo: yes
  tags:
    - common
    - puppet
    - config

- name: Stopping and disabling chef client
  service: name=chef-client state=stopped enabled=no
  sudo: yes
  tags:
    - common
    - chef-client
    - config
